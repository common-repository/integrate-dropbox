!function(o){const n=window.indboxFileSelector;let i;i={init:function(){indbox.isWooCommerceDownloadEnabled&&i.addSelectFilesButton()},addSelectFilesButton:function(){o(".downloadable_files").each((function(){o(this).find("tfoot th:last-child").append('<div class="indbox-woocommerce-downloadable_files"><button class="indbox-btn btn-primary btn-shape-square indbox-add-file-btn"><span class="indbox-icon indbox-logo"></span>Add Dropbox File</button></div>')})),o(".indbox-add-file-btn").on("click",(function(o){o.preventDefault(),i.handleAddFile()}))},handleAddFile:function(){Swal.fire({html:'<div id="indbox-file-browser" class="indbox-indbox-file-browser-modal-wrap"></div>',showConfirmButton:!1,customClass:{container:"indbox-file-browser-container indbox-toplavel-wrapper"},didOpen:function(){document.getElementById("indbox-file-browser").addEventListener("click",(function(o){o.stopPropagation()})),n({id:"file-selector",isMultipleSelect:!0,rootId:"indbox-file-browser",attributes:[],setAttributes:function(n){const i=o(".form-field.downloadable_files");n.forEach((n=>{const e=n.file_id,t=n.name,d=`https://dropbox.com/integrate-dropbox?action=indbox_download_file&id=${e}&account_id=${n.account_id}&indbox=${indbox.nonce}`;var l=o(i.find(".button.insert").data("row")).clone();l.find(".file_name .input_text").val(t),l.find(".file_url .input_text").val(d),i.find("tbody").append(l)})),Swal.close()},closeModal:function(){Swal.close()}})},willClose:function(){ReactDOM.unmountComponentAtNode(document.getElementById("indbox-file-browser"))}})}},o((function(){i.init()}))}(jQuery);